<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Plotting graphs for structural equation models • tidySEM</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plotting graphs for structural equation models">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidySEM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.9.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Generating_syntax.html">Generating syntax for structural equation models</a></li>
    <li><a class="dropdown-item" href="../articles/lca_confirmatory.html">Confirmatory LPA for the Caregiver Compass</a></li>
    <li><a class="dropdown-item" href="../articles/lca_exploratory.html">Exploratory LPA for Ocean Microplastics</a></li>
    <li><a class="dropdown-item" href="../articles/lca_lcga.html">Latent Class Growth Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/lca_ordinal.html">Latent Class Analysis for Ordinal Indicators</a></li>
    <li><a class="dropdown-item" href="../articles/Plotting_graphs.html">Plotting graphs for structural equation models</a></li>
    <li><a class="dropdown-item" href="../articles/sem_graph.html">SEM graphing conventions</a></li>
    <li><a class="dropdown-item" href="../articles/SMART_LCA_checklist.html">SMART-LCA Checklist</a></li>
    <li><a class="dropdown-item" href="../articles/Tabulating_results.html">Tabulating results from structural equation models</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cjvanlissa/tidySEM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plotting graphs for structural equation models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cjvanlissa/tidySEM/blob/master/vignettes/Plotting_graphs.Rmd" class="external-link"><code>vignettes/Plotting_graphs.Rmd</code></a></small>
      <div class="d-none name"><code>Plotting_graphs.Rmd</code></div>
    </div>

    
    
<p><code>tidySEM</code> offers a user-friendly, tidy workflow for
plotting graphs for SEM models. The workflow is largely
<em>programmatic</em>, meaning that graphs are created mostly
automatically from the output of an analysis. At the same time, all
elements of the graph are stored as <code>data.frame</code>s, which
allows swift and easy customization of graphics, and artistic freedom.
Some existing graphing packages automatically create a layout, but are
very difficult to customize. Particularly for complex SEM models, it may
be preferable to make the layout by hand, including only nodes one
wishes to plot, and reporting the rest in a comprehensive table of
coefficients (e.g., one obtained through
<code><a href="../reference/table_results.html">table_results()</a></code>.</p>
<p>For users wholly unfamiliar with SEM graphs, I recommend reading the
<a href="https://cjvanlissa.github.io/tidySEM/articles/sem_graph.html">vignette
about SEM graphing conventions</a> first.</p>
<p>Let’s load the required packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cjvanlissa.github.io/tidySEM/">tidySEM</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="the-tidysem-workflow">The tidySEM workflow<a class="anchor" aria-label="anchor" href="#the-tidysem-workflow"></a>
</h2>
<p>The workflow underlying graphing in <code>tidySEM</code> is as
follows:</p>
<ol style="list-style-type: decimal">
<li>Run an analysis, e.g., using <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code> or
<code><a href="https://michaelhallquist.github.io/MplusAutomation/reference/mplusModeler.html" class="external-link">MplusAutomation::mplusModeler()</a></code>, passing the output to an
object, e.g., <code>fit</code>
</li>
<li>Plot the graph using the function <code>graph(fit)</code>, or
customize the graph further by following the optional steps below.</li>
<li>
<em>Optionally</em> Examine what nodes and edges can be extracted
from the fit model object, by running <code>get_nodes(fit)</code> and
<code>get_edges(fit)</code>
</li>
<li>
<em>Optionally</em> Specify a layout for the graph using
<code><a href="../reference/get_layout.html">get_layout()</a></code>
</li>
<li>
<em>Optionally</em>, prepare graph data before plotting, by running
<code>prepare_graph(fit, layout)</code>. Store the resulting graph data
in an object, e.g., <code>graph_data</code>
</li>
<li>
<em>Optionally</em>, access the nodes and edges in
<code>graph_data</code> using <code>nodes(graph_data)</code> and
<code>edges(graph_data)</code>
</li>
<li>
<em>Optionally</em>, modify the nodes and edges in
<code>graph_data</code> using
<code>nodes(graph_data) &lt;- ...</code>and
<code>edges(graph_data) &lt;- ...</code>
</li>
</ol>
<p>This workflow ensures a high degree of transparency and
customizability. Objects returned by all functions are “tidy” data,
i.e., tabular <code>data.frames</code>, and can be modified using the
familiar suite of functions in the ‘tidyverse’.</p>
</div>
<div class="section level2">
<h2 id="example-graphing-a-cfa">Example: Graphing a CFA<a class="anchor" aria-label="anchor" href="#example-graphing-a-cfa"></a>
</h2>
<div class="section level3">
<h3 id="step-1-run-an-analysis">Step 1: Run an analysis<a class="anchor" aria-label="anchor" href="#step-1-run-an-analysis"></a>
</h3>
<p>As an example, let’s make a graph for a classic <code>lavaan</code>
tutorial example for CFA. First, we conduct the SEM analysis:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="va">HS.model</span> <span class="op">&lt;-</span> <span class="st">' visual  =~ x1 + x2 + x3</span></span>
<span><span class="st">              textual =~ x4 + x5 + x6</span></span>
<span><span class="st">              speed   =~ x7 + x8 + x9 '</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">HS.model</span>, data<span class="op">=</span><span class="va">HolzingerSwineford1939</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-plot-the-graph">Step 2: Plot the graph<a class="anchor" aria-label="anchor" href="#step-2-plot-the-graph"></a>
</h3>
<p>At this point, we could simply plot the graph:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/graph_sem.html">graph_sem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">fit</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig1.png" width="100%"></p>
<p>This uses a default layout, provided by the <code>igraph</code>
package. However, the node placement is not very aesthetically pleasing.
One of the areas where <code>tidySEM</code> really excels is
customization. Because every aspect of the graph is represented as tidy
data (basically, a spreadsheet), it is easy to move nodes around and
create a custom layout.</p>
</div>
<div class="section level3">
<h3 id="optional-step-3-customizing-the-layout">Optional step 3: Customizing the layout<a class="anchor" aria-label="anchor" href="#optional-step-3-customizing-the-layout"></a>
</h3>
<p>In <code>tidySEM</code>, the layout is specified as a matrix (grid)
with node names and empty spaces (<code>NA</code> or <code>""</code>).
There are essentially three ways to specify the layout:</p>
<ol style="list-style-type: decimal">
<li>Automatically, from the fit model</li>
<li>Manually in R</li>
<li>In a spreadsheet program</li>
</ol>
<div class="section level4">
<h4 id="automatically-generate-layout-for-a-model">Automatically generate layout for a model<a class="anchor" aria-label="anchor" href="#automatically-generate-layout-for-a-model"></a>
</h4>
<p>The example above used an automatically generated layout for the fit
model (<code>lavaan</code> or <code>Mplus</code>). If you open the help
file for the function by running <code><a href="../reference/graph_sem.html">?graph_sem</a></code>, you can see
that the default argument is
<code>layout = get_layout(x = model)</code>, where model refers to the
<code>model</code> argument of the same function.</p>
<p>The <code><a href="../reference/get_layout.html">get_layout()</a></code> function automatically generates a
layout for a fit model object. To get this layout as a matrix, you can
run:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2]      [,3] [,4] [,5]    [,6]     [,7] [,8]</span></span>
<span><span class="co">#&gt; [1,] NA   NA        NA   NA   NA      "visual" NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "textual" NA   NA   "speed" "x1"     "x2" "x3"</span></span>
<span><span class="co">#&gt; [3,] "x4" "x5"      "x6" "x7" "x8"    "x9"     NA   NA  </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span></code></pre></div>
<p>The <code><a href="../reference/get_layout.html">get_layout()</a></code> function relies on
<code><a href="https://r.igraph.org/reference/layout_as_tree.html" class="external-link">igraph::layout_as_tree()</a></code> to place the nodes. Other layout
functions from the <code>igraph</code> package can be used by specifying
the <code>layout_algorithm = ...</code> argument:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="va">fit</span>, layout_algorithm <span class="op">=</span> <span class="st">"layout_in_circle"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2]      [,3] [,4] [,5]    [,6]     [,7] [,8]</span></span>
<span><span class="co">#&gt; [1,] NA   NA        NA   NA   NA      "visual" NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "textual" NA   NA   "speed" "x1"     "x2" "x3"</span></span>
<span><span class="co">#&gt; [3,] "x4" "x5"      "x6" "x7" "x8"    "x9"     NA   NA  </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span>
<span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="va">fit</span>, layout_algorithm <span class="op">=</span> <span class="st">"layout_on_grid"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2]      [,3] [,4] [,5]    [,6]     [,7] [,8]</span></span>
<span><span class="co">#&gt; [1,] NA   NA        NA   NA   NA      "visual" NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "textual" NA   NA   "speed" "x1"     "x2" "x3"</span></span>
<span><span class="co">#&gt; [3,] "x4" "x5"      "x6" "x7" "x8"    "x9"     NA   NA  </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="specifying-layout-manually-in-r">Specifying layout manually in R<a class="anchor" aria-label="anchor" href="#specifying-layout-manually-in-r"></a>
</h4>
<p>Manually specifying the layout can be done by providing node names
and empty spaces (<code>NA</code> or <code>""</code>), and the number of
rows of the desired layout matrix. For example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="cn">NA</span>,  <span class="st">"d"</span>,</span>
<span>           <span class="cn">NA</span>,  <span class="st">"e"</span>, <span class="cn">NA</span>, rows <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,] "c"  NA   "d" </span></span>
<span><span class="co">#&gt; [2,] NA   "e"  NA  </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span></code></pre></div>
<p>Of course, it is also possible to simply define a matrix using
<code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="specifying-layout-in-a-spreadsheet-program">Specifying layout in a spreadsheet program<a class="anchor" aria-label="anchor" href="#specifying-layout-in-a-spreadsheet-program"></a>
</h4>
<p>Specifying the layout in a spreadsheet program is very user-friendly,
because one can visually position the nodes, e.g.:</p>
<p><img src="spreadsheet.png"></p>
<p>To obtain the layout matrix, one can save the spreadsheet as
<code>.csv</code> file and load it in R like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"example.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, one can select the layout as in the image above, copy
it to the clipboard, and then read it into R from the clipboard. This
works differently on Windows and Mac.</p>
<p>On Windows, run:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="st">"clipboard"</span>, sep <span class="op">=</span> <span class="st">"\t"</span><span class="op">)</span></span></code></pre></div>
<p>On Mac, run:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">pipe</a></span><span class="op">(</span><span class="st">"pbpaste"</span><span class="op">)</span>, sep<span class="op">=</span><span class="st">"\t"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   V1     V2 V3</span></span>
<span><span class="co">#&gt; 1 x1     x2 x3</span></span>
<span><span class="co">#&gt; 2    visual</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="examples-of-user-defined-layout">Examples of user-defined layout<a class="anchor" aria-label="anchor" href="#examples-of-user-defined-layout"></a>
</h3>
<p>We can specify a simple layout for two hypothetical nodes
<code>x</code> and <code>y</code> is generated as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, rows <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,] "x"  "y" </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span></code></pre></div>
<p>For a mediation model, one might specify a layout like this:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"m"</span>, <span class="st">""</span>,</span>
<span>           <span class="st">"x"</span>, <span class="st">""</span>, <span class="st">"y"</span>, rows <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,] ""   "m"  ""  </span></span>
<span><span class="co">#&gt; [2,] "x"  ""   "y" </span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span></code></pre></div>
<p>For a three-item CFA model, one might specify:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"F"</span>, <span class="st">""</span>,</span>
<span>           <span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, rows <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,] ""   "F"  ""  </span></span>
<span><span class="co">#&gt; [2,] "y1" "y2" "y3"</span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "layout_matrix" "matrix"        "array"</span></span></code></pre></div>
<p>And for the CFA model we estimated above:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lay</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">""</span>, <span class="st">"visual"</span>,<span class="st">""</span>,<span class="st">"textual"</span>,<span class="st">""</span>,<span class="st">"speed"</span>,<span class="st">""</span>, <span class="st">""</span>,</span>
<span>                  <span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span>, <span class="st">"x4"</span>, <span class="st">"x5"</span>, <span class="st">"x6"</span>, <span class="st">"x7"</span>, <span class="st">"x8"</span>, <span class="st">"x9"</span>, rows <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>We could plot the CFA model with this custom layout as follows:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/graph_sem.html">graph_sem</a></span><span class="op">(</span><span class="va">fit</span>, layout <span class="op">=</span> <span class="va">lay</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig2_1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="step-4-customize-nodes-and-edges">Step 4: Customize nodes and edges<a class="anchor" aria-label="anchor" href="#step-4-customize-nodes-and-edges"></a>
</h3>
<p>For the simple model above, it is easy to verify the names of the
nodes and edges from the syntax above: The nodes consist of three latent
variables (visual, textual, and speed), and nine observed variables
(x1-x9). The edges are nine factor loadings - and three latent variable
correlations, included by default. We can confirm which nodes are
available by running <code><a href="../reference/get_nodes.html">get_nodes()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_nodes.html">get_nodes</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;       name shape   label</span></span>
<span><span class="co">#&gt; 1   visual  oval  visual</span></span>
<span><span class="co">#&gt; 2  textual  oval textual</span></span>
<span><span class="co">#&gt; 3    speed  oval   speed</span></span>
<span><span class="co">#&gt; 4       x1  rect      x1</span></span>
<span><span class="co">#&gt; 5       x2  rect      x2</span></span>
<span><span class="co">#&gt; 6       x3  rect      x3</span></span>
<span><span class="co">#&gt; 7       x4  rect      x4</span></span>
<span><span class="co">#&gt; 8       x5  rect      x5</span></span>
<span><span class="co">#&gt; 9       x6  rect      x6</span></span>
<span><span class="co">#&gt; 10      x7  rect      x7</span></span>
<span><span class="co">#&gt; 11      x8  rect      x8</span></span>
<span><span class="co">#&gt; 12      x9  rect      x9</span></span></code></pre></div>
<p>And for the edges:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_edges.html">get_edges</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;       from      to arrow   label connect_from connect_to curvature linetype</span></span>
<span><span class="co">#&gt; 1   visual      x1  last    1.00           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 2   visual      x2  last 0.55***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 3   visual      x3  last 0.73***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 4  textual      x4  last    1.00           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 5  textual      x5  last 1.11***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 6  textual      x6  last 0.93***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 7    speed      x7  last    1.00           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 8    speed      x8  last 1.18***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 9    speed      x9  last 1.08***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 10      x1      x1  both 0.55***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 11      x2      x2  both 1.13***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 12      x3      x3  both 0.84***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 13      x4      x4  both 0.37***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 14      x5      x5  both 0.45***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 15      x6      x6  both 0.36***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 16      x7      x7  both 0.80***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 17      x8      x8  both 0.49***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 18      x9      x9  both 0.57***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 19  visual  visual  both 0.81***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 20 textual textual  both 0.98***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 21   speed   speed  both 0.38***           NA         NA        NA        1</span></span>
<span><span class="co">#&gt; 22  visual textual  none 0.41***           NA         NA        60        2</span></span>
<span><span class="co">#&gt; 23  visual   speed  none 0.26***           NA         NA        60        2</span></span>
<span><span class="co">#&gt; 24 textual   speed  none 0.17***           NA         NA        60        2</span></span>
<span><span class="co">#&gt;        lhs op     rhs  est   se pval      confint est_sig est_std se_std</span></span>
<span><span class="co">#&gt; 1   visual =~      x1 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.77   0.05</span></span>
<span><span class="co">#&gt; 2   visual =~      x2 0.55 0.10 0.00 [0.36, 0.75] 0.55***    0.42   0.06</span></span>
<span><span class="co">#&gt; 3   visual =~      x3 0.73 0.11 0.00 [0.52, 0.94] 0.73***    0.58   0.06</span></span>
<span><span class="co">#&gt; 4  textual =~      x4 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.85   0.02</span></span>
<span><span class="co">#&gt; 5  textual =~      x5 1.11 0.07 0.00 [0.98, 1.24] 1.11***    0.86   0.02</span></span>
<span><span class="co">#&gt; 6  textual =~      x6 0.93 0.06 0.00 [0.82, 1.03] 0.93***    0.84   0.02</span></span>
<span><span class="co">#&gt; 7    speed =~      x7 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.57   0.05</span></span>
<span><span class="co">#&gt; 8    speed =~      x8 1.18 0.16 0.00 [0.86, 1.50] 1.18***    0.72   0.05</span></span>
<span><span class="co">#&gt; 9    speed =~      x9 1.08 0.15 0.00 [0.79, 1.38] 1.08***    0.67   0.05</span></span>
<span><span class="co">#&gt; 10      x1 ~~      x1 0.55 0.11 0.00 [0.33, 0.77] 0.55***    0.40   0.08</span></span>
<span><span class="co">#&gt; 11      x2 ~~      x2 1.13 0.10 0.00 [0.93, 1.33] 1.13***    0.82   0.05</span></span>
<span><span class="co">#&gt; 12      x3 ~~      x3 0.84 0.09 0.00 [0.67, 1.02] 0.84***    0.66   0.06</span></span>
<span><span class="co">#&gt; 13      x4 ~~      x4 0.37 0.05 0.00 [0.28, 0.46] 0.37***    0.27   0.04</span></span>
<span><span class="co">#&gt; 14      x5 ~~      x5 0.45 0.06 0.00 [0.33, 0.56] 0.45***    0.27   0.04</span></span>
<span><span class="co">#&gt; 15      x6 ~~      x6 0.36 0.04 0.00 [0.27, 0.44] 0.36***    0.30   0.04</span></span>
<span><span class="co">#&gt; 16      x7 ~~      x7 0.80 0.08 0.00 [0.64, 0.96] 0.80***    0.68   0.06</span></span>
<span><span class="co">#&gt; 17      x8 ~~      x8 0.49 0.07 0.00 [0.34, 0.63] 0.49***    0.48   0.07</span></span>
<span><span class="co">#&gt; 18      x9 ~~      x9 0.57 0.07 0.00 [0.43, 0.70] 0.57***    0.56   0.07</span></span>
<span><span class="co">#&gt; 19  visual ~~  visual 0.81 0.15 0.00 [0.52, 1.09] 0.81***    1.00   0.00</span></span>
<span><span class="co">#&gt; 20 textual ~~ textual 0.98 0.11 0.00 [0.76, 1.20] 0.98***    1.00   0.00</span></span>
<span><span class="co">#&gt; 21   speed ~~   speed 0.38 0.09 0.00 [0.21, 0.55] 0.38***    1.00   0.00</span></span>
<span><span class="co">#&gt; 22  visual ~~ textual 0.41 0.07 0.00 [0.26, 0.55] 0.41***    0.46   0.06</span></span>
<span><span class="co">#&gt; 23  visual ~~   speed 0.26 0.06 0.00 [0.15, 0.37] 0.26***    0.47   0.07</span></span>
<span><span class="co">#&gt; 24 textual ~~   speed 0.17 0.05 0.00 [0.08, 0.27] 0.17***    0.28   0.07</span></span>
<span><span class="co">#&gt;    pval_std  confint_std est_sig_std       label_results show</span></span>
<span><span class="co">#&gt; 1      0.00 [0.66, 0.88]     0.77***        visual.BY.x1 TRUE</span></span>
<span><span class="co">#&gt; 2      0.00 [0.31, 0.54]     0.42***        visual.BY.x2 TRUE</span></span>
<span><span class="co">#&gt; 3      0.00 [0.47, 0.69]     0.58***        visual.BY.x3 TRUE</span></span>
<span><span class="co">#&gt; 4      0.00 [0.81, 0.90]     0.85***       textual.BY.x4 TRUE</span></span>
<span><span class="co">#&gt; 5      0.00 [0.81, 0.90]     0.86***       textual.BY.x5 TRUE</span></span>
<span><span class="co">#&gt; 6      0.00 [0.79, 0.88]     0.84***       textual.BY.x6 TRUE</span></span>
<span><span class="co">#&gt; 7      0.00 [0.47, 0.67]     0.57***         speed.BY.x7 TRUE</span></span>
<span><span class="co">#&gt; 8      0.00 [0.62, 0.82]     0.72***         speed.BY.x8 TRUE</span></span>
<span><span class="co">#&gt; 9      0.00 [0.56, 0.77]     0.67***         speed.BY.x9 TRUE</span></span>
<span><span class="co">#&gt; 10     0.00 [0.24, 0.57]     0.40***        Variances.x1 TRUE</span></span>
<span><span class="co">#&gt; 11     0.00 [0.72, 0.92]     0.82***        Variances.x2 TRUE</span></span>
<span><span class="co">#&gt; 12     0.00 [0.54, 0.79]     0.66***        Variances.x3 TRUE</span></span>
<span><span class="co">#&gt; 13     0.00 [0.20, 0.35]     0.27***        Variances.x4 TRUE</span></span>
<span><span class="co">#&gt; 14     0.00 [0.19, 0.34]     0.27***        Variances.x5 TRUE</span></span>
<span><span class="co">#&gt; 15     0.00 [0.22, 0.37]     0.30***        Variances.x6 TRUE</span></span>
<span><span class="co">#&gt; 16     0.00 [0.56, 0.79]     0.68***        Variances.x7 TRUE</span></span>
<span><span class="co">#&gt; 17     0.00 [0.33, 0.62]     0.48***        Variances.x8 TRUE</span></span>
<span><span class="co">#&gt; 18     0.00 [0.42, 0.69]     0.56***        Variances.x9 TRUE</span></span>
<span><span class="co">#&gt; 19     &lt;NA&gt; [1.00, 1.00]        1.00    Variances.visual TRUE</span></span>
<span><span class="co">#&gt; 20     &lt;NA&gt; [1.00, 1.00]        1.00   Variances.textual TRUE</span></span>
<span><span class="co">#&gt; 21     &lt;NA&gt; [1.00, 1.00]        1.00     Variances.speed TRUE</span></span>
<span><span class="co">#&gt; 22     0.00 [0.33, 0.58]     0.46*** visual.WITH.textual TRUE</span></span>
<span><span class="co">#&gt; 23     0.00 [0.33, 0.61]     0.47***   visual.WITH.speed TRUE</span></span>
<span><span class="co">#&gt; 24     0.00 [0.15, 0.42]     0.28***  textual.WITH.speed TRUE</span></span></code></pre></div>
<p>Note that only the first few columns are used for plotting
(specifically, <code>from</code>, <code>to</code>, <code>arrow</code>,
<code>label</code>, <code>connect_from</code>, <code>connect_to</code>,
and <code>curvature</code>). The remaining columns correspond to the
output of <code>table_results(fit)</code>. These auxiliary columns can
be used to conditionally customize the graph (e.g., changing the color
or linetype for significant paths only).</p>
<div class="section level4">
<h4 id="customizing-node-and-edge-labels">Customizing node and edge labels<a class="anchor" aria-label="anchor" href="#customizing-node-and-edge-labels"></a>
</h4>
<p>The <code><a href="../reference/get_nodes.html">get_nodes()</a></code> and <code><a href="../reference/get_edges.html">get_edges()</a></code> functions
both call <code><a href="../reference/table_results.html">table_results()</a></code> on the fit model object to get
information about the nodes and edges. Both functions have a
<code>label</code> argument which can either be a character string
referencing a column of the output of <code><a href="../reference/table_results.html">table_results()</a></code>, or
an expression that is evaluated in the context of that output.</p>
<p>This allows you to customize node and edge labels. For example, maybe
you want to combine the parameter estimate and its confidence interval
into an edge label:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_edges.html">get_edges</a></span><span class="op">(</span><span class="va">fit</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">est</span>, <span class="va">confint</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       from      to arrow             label connect_from connect_to curvature</span></span>
<span><span class="co">#&gt; 1   visual      x1  last 1.00 [1.00, 1.00]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 2   visual      x2  last 0.55 [0.36, 0.75]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 3   visual      x3  last 0.73 [0.52, 0.94]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 4  textual      x4  last 1.00 [1.00, 1.00]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 5  textual      x5  last 1.11 [0.98, 1.24]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 6  textual      x6  last 0.93 [0.82, 1.03]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 7    speed      x7  last 1.00 [1.00, 1.00]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 8    speed      x8  last 1.18 [0.86, 1.50]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 9    speed      x9  last 1.08 [0.79, 1.38]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 10      x1      x1  both 0.55 [0.33, 0.77]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 11      x2      x2  both 1.13 [0.93, 1.33]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 12      x3      x3  both 0.84 [0.67, 1.02]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 13      x4      x4  both 0.37 [0.28, 0.46]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 14      x5      x5  both 0.45 [0.33, 0.56]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 15      x6      x6  both 0.36 [0.27, 0.44]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 16      x7      x7  both 0.80 [0.64, 0.96]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 17      x8      x8  both 0.49 [0.34, 0.63]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 18      x9      x9  both 0.57 [0.43, 0.70]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 19  visual  visual  both 0.81 [0.52, 1.09]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 20 textual textual  both 0.98 [0.76, 1.20]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 21   speed   speed  both 0.38 [0.21, 0.55]           NA         NA        NA</span></span>
<span><span class="co">#&gt; 22  visual textual  none 0.41 [0.26, 0.55]           NA         NA        60</span></span>
<span><span class="co">#&gt; 23  visual   speed  none 0.26 [0.15, 0.37]           NA         NA        60</span></span>
<span><span class="co">#&gt; 24 textual   speed  none 0.17 [0.08, 0.27]           NA         NA        60</span></span>
<span><span class="co">#&gt;    linetype     lhs op     rhs  est   se pval      confint est_sig est_std</span></span>
<span><span class="co">#&gt; 1         1  visual =~      x1 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.77</span></span>
<span><span class="co">#&gt; 2         1  visual =~      x2 0.55 0.10 0.00 [0.36, 0.75] 0.55***    0.42</span></span>
<span><span class="co">#&gt; 3         1  visual =~      x3 0.73 0.11 0.00 [0.52, 0.94] 0.73***    0.58</span></span>
<span><span class="co">#&gt; 4         1 textual =~      x4 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.85</span></span>
<span><span class="co">#&gt; 5         1 textual =~      x5 1.11 0.07 0.00 [0.98, 1.24] 1.11***    0.86</span></span>
<span><span class="co">#&gt; 6         1 textual =~      x6 0.93 0.06 0.00 [0.82, 1.03] 0.93***    0.84</span></span>
<span><span class="co">#&gt; 7         1   speed =~      x7 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.57</span></span>
<span><span class="co">#&gt; 8         1   speed =~      x8 1.18 0.16 0.00 [0.86, 1.50] 1.18***    0.72</span></span>
<span><span class="co">#&gt; 9         1   speed =~      x9 1.08 0.15 0.00 [0.79, 1.38] 1.08***    0.67</span></span>
<span><span class="co">#&gt; 10        1      x1 ~~      x1 0.55 0.11 0.00 [0.33, 0.77] 0.55***    0.40</span></span>
<span><span class="co">#&gt; 11        1      x2 ~~      x2 1.13 0.10 0.00 [0.93, 1.33] 1.13***    0.82</span></span>
<span><span class="co">#&gt; 12        1      x3 ~~      x3 0.84 0.09 0.00 [0.67, 1.02] 0.84***    0.66</span></span>
<span><span class="co">#&gt; 13        1      x4 ~~      x4 0.37 0.05 0.00 [0.28, 0.46] 0.37***    0.27</span></span>
<span><span class="co">#&gt; 14        1      x5 ~~      x5 0.45 0.06 0.00 [0.33, 0.56] 0.45***    0.27</span></span>
<span><span class="co">#&gt; 15        1      x6 ~~      x6 0.36 0.04 0.00 [0.27, 0.44] 0.36***    0.30</span></span>
<span><span class="co">#&gt; 16        1      x7 ~~      x7 0.80 0.08 0.00 [0.64, 0.96] 0.80***    0.68</span></span>
<span><span class="co">#&gt; 17        1      x8 ~~      x8 0.49 0.07 0.00 [0.34, 0.63] 0.49***    0.48</span></span>
<span><span class="co">#&gt; 18        1      x9 ~~      x9 0.57 0.07 0.00 [0.43, 0.70] 0.57***    0.56</span></span>
<span><span class="co">#&gt; 19        1  visual ~~  visual 0.81 0.15 0.00 [0.52, 1.09] 0.81***    1.00</span></span>
<span><span class="co">#&gt; 20        1 textual ~~ textual 0.98 0.11 0.00 [0.76, 1.20] 0.98***    1.00</span></span>
<span><span class="co">#&gt; 21        1   speed ~~   speed 0.38 0.09 0.00 [0.21, 0.55] 0.38***    1.00</span></span>
<span><span class="co">#&gt; 22        2  visual ~~ textual 0.41 0.07 0.00 [0.26, 0.55] 0.41***    0.46</span></span>
<span><span class="co">#&gt; 23        2  visual ~~   speed 0.26 0.06 0.00 [0.15, 0.37] 0.26***    0.47</span></span>
<span><span class="co">#&gt; 24        2 textual ~~   speed 0.17 0.05 0.00 [0.08, 0.27] 0.17***    0.28</span></span>
<span><span class="co">#&gt;    se_std pval_std  confint_std est_sig_std       label_results show</span></span>
<span><span class="co">#&gt; 1    0.05     0.00 [0.66, 0.88]     0.77***        visual.BY.x1 TRUE</span></span>
<span><span class="co">#&gt; 2    0.06     0.00 [0.31, 0.54]     0.42***        visual.BY.x2 TRUE</span></span>
<span><span class="co">#&gt; 3    0.06     0.00 [0.47, 0.69]     0.58***        visual.BY.x3 TRUE</span></span>
<span><span class="co">#&gt; 4    0.02     0.00 [0.81, 0.90]     0.85***       textual.BY.x4 TRUE</span></span>
<span><span class="co">#&gt; 5    0.02     0.00 [0.81, 0.90]     0.86***       textual.BY.x5 TRUE</span></span>
<span><span class="co">#&gt; 6    0.02     0.00 [0.79, 0.88]     0.84***       textual.BY.x6 TRUE</span></span>
<span><span class="co">#&gt; 7    0.05     0.00 [0.47, 0.67]     0.57***         speed.BY.x7 TRUE</span></span>
<span><span class="co">#&gt; 8    0.05     0.00 [0.62, 0.82]     0.72***         speed.BY.x8 TRUE</span></span>
<span><span class="co">#&gt; 9    0.05     0.00 [0.56, 0.77]     0.67***         speed.BY.x9 TRUE</span></span>
<span><span class="co">#&gt; 10   0.08     0.00 [0.24, 0.57]     0.40***        Variances.x1 TRUE</span></span>
<span><span class="co">#&gt; 11   0.05     0.00 [0.72, 0.92]     0.82***        Variances.x2 TRUE</span></span>
<span><span class="co">#&gt; 12   0.06     0.00 [0.54, 0.79]     0.66***        Variances.x3 TRUE</span></span>
<span><span class="co">#&gt; 13   0.04     0.00 [0.20, 0.35]     0.27***        Variances.x4 TRUE</span></span>
<span><span class="co">#&gt; 14   0.04     0.00 [0.19, 0.34]     0.27***        Variances.x5 TRUE</span></span>
<span><span class="co">#&gt; 15   0.04     0.00 [0.22, 0.37]     0.30***        Variances.x6 TRUE</span></span>
<span><span class="co">#&gt; 16   0.06     0.00 [0.56, 0.79]     0.68***        Variances.x7 TRUE</span></span>
<span><span class="co">#&gt; 17   0.07     0.00 [0.33, 0.62]     0.48***        Variances.x8 TRUE</span></span>
<span><span class="co">#&gt; 18   0.07     0.00 [0.42, 0.69]     0.56***        Variances.x9 TRUE</span></span>
<span><span class="co">#&gt; 19   0.00     &lt;NA&gt; [1.00, 1.00]        1.00    Variances.visual TRUE</span></span>
<span><span class="co">#&gt; 20   0.00     &lt;NA&gt; [1.00, 1.00]        1.00   Variances.textual TRUE</span></span>
<span><span class="co">#&gt; 21   0.00     &lt;NA&gt; [1.00, 1.00]        1.00     Variances.speed TRUE</span></span>
<span><span class="co">#&gt; 22   0.06     0.00 [0.33, 0.58]     0.46*** visual.WITH.textual TRUE</span></span>
<span><span class="co">#&gt; 23   0.07     0.00 [0.33, 0.61]     0.47***   visual.WITH.speed TRUE</span></span>
<span><span class="co">#&gt; 24   0.07     0.00 [0.15, 0.42]     0.28***  textual.WITH.speed TRUE</span></span></code></pre></div>
<p>We can do the same for the nodes, but note that in the previous
<code>lavaan</code> model, the mean structure was <strong>not</strong>
part of the model. As the nodes represent means and intercepts,
<code><a href="../reference/table_results.html">table_results()</a></code> will not retrieve any parameter estimates
for the nodes when the mean structure is not part of the model. In
absence of additional information about the nodes,
<code><a href="../reference/get_nodes.html">get_nodes()</a></code> will use the node name as a label.To remove all
node labels, specify <code>label = NULL</code>.</p>
<p>We can re-run the model with a mean structure to get more information
about the nodes:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html" class="external-link">cfa</a></span><span class="op">(</span><span class="va">HS.model</span>, data<span class="op">=</span><span class="va">HolzingerSwineford1939</span>, meanstructure <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Running <code><a href="../reference/get_nodes.html">get_nodes()</a></code> now uses the estimated means in the
label:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_nodes.html">get_nodes</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;       name shape         label     lhs op rhs  est   se pval      confint</span></span>
<span><span class="co">#&gt; 1    speed  oval   speed\n0.00   speed ~1     0.00 0.00 &lt;NA&gt; [0.00, 0.00]</span></span>
<span><span class="co">#&gt; 2  textual  oval textual\n0.00 textual ~1     0.00 0.00 &lt;NA&gt; [0.00, 0.00]</span></span>
<span><span class="co">#&gt; 3   visual  oval  visual\n0.00  visual ~1     0.00 0.00 &lt;NA&gt; [0.00, 0.00]</span></span>
<span><span class="co">#&gt; 4       x1  rect   x1\n4.94***      x1 ~1     4.94 0.07 0.00 [4.80, 5.07]</span></span>
<span><span class="co">#&gt; 5       x2  rect   x2\n6.09***      x2 ~1     6.09 0.07 0.00 [5.96, 6.22]</span></span>
<span><span class="co">#&gt; 6       x3  rect   x3\n2.25***      x3 ~1     2.25 0.07 0.00 [2.12, 2.38]</span></span>
<span><span class="co">#&gt; 7       x4  rect   x4\n3.06***      x4 ~1     3.06 0.07 0.00 [2.93, 3.19]</span></span>
<span><span class="co">#&gt; 8       x5  rect   x5\n4.34***      x5 ~1     4.34 0.07 0.00 [4.19, 4.49]</span></span>
<span><span class="co">#&gt; 9       x6  rect   x6\n2.19***      x6 ~1     2.19 0.06 0.00 [2.06, 2.31]</span></span>
<span><span class="co">#&gt; 10      x7  rect   x7\n4.19***      x7 ~1     4.19 0.06 0.00 [4.06, 4.31]</span></span>
<span><span class="co">#&gt; 11      x8  rect   x8\n5.53***      x8 ~1     5.53 0.06 0.00 [5.41, 5.64]</span></span>
<span><span class="co">#&gt; 12      x9  rect   x9\n5.37***      x9 ~1     5.37 0.06 0.00 [5.26, 5.49]</span></span>
<span><span class="co">#&gt;    est_sig est_std se_std pval_std  confint_std est_sig_std label_results</span></span>
<span><span class="co">#&gt; 1     0.00    0.00   0.00     &lt;NA&gt; [0.00, 0.00]        0.00   Means.speed</span></span>
<span><span class="co">#&gt; 2     0.00    0.00   0.00     &lt;NA&gt; [0.00, 0.00]        0.00 Means.textual</span></span>
<span><span class="co">#&gt; 3     0.00    0.00   0.00     &lt;NA&gt; [0.00, 0.00]        0.00  Means.visual</span></span>
<span><span class="co">#&gt; 4  4.94***    4.23   0.18     0.00 [3.88, 4.59]     4.23***      Means.x1</span></span>
<span><span class="co">#&gt; 5  6.09***    5.18   0.22     0.00 [4.75, 5.61]     5.18***      Means.x2</span></span>
<span><span class="co">#&gt; 6  2.25***    1.99   0.10     0.00 [1.80, 2.19]     1.99***      Means.x3</span></span>
<span><span class="co">#&gt; 7  3.06***    2.63   0.12     0.00 [2.39, 2.87]     2.63***      Means.x4</span></span>
<span><span class="co">#&gt; 8  4.34***    3.37   0.15     0.00 [3.08, 3.66]     3.37***      Means.x5</span></span>
<span><span class="co">#&gt; 9  2.19***    2.00   0.10     0.00 [1.80, 2.19]     2.00***      Means.x6</span></span>
<span><span class="co">#&gt; 10 4.19***    3.85   0.17     0.00 [3.52, 4.18]     3.85***      Means.x7</span></span>
<span><span class="co">#&gt; 11 5.53***    5.47   0.23     0.00 [5.02, 5.92]     5.47***      Means.x8</span></span>
<span><span class="co">#&gt; 12 5.37***    5.33   0.22     0.00 [4.89, 5.78]     5.33***      Means.x9</span></span></code></pre></div>
<p>These labels can be further customized as shown below:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_nodes.html">get_nodes</a></span><span class="op">(</span><span class="va">fit</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">name</span>, <span class="st">"\n"</span>, <span class="va">est</span>, <span class="st">" "</span>, <span class="va">confint</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       name shape                      label     lhs op rhs  est   se pval</span></span>
<span><span class="co">#&gt; 1    speed  oval   speed\n0.00 [0.00, 0.00]   speed ~1     0.00 0.00 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  textual  oval textual\n0.00 [0.00, 0.00] textual ~1     0.00 0.00 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3   visual  oval  visual\n0.00 [0.00, 0.00]  visual ~1     0.00 0.00 &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4       x1  rect      x1\n4.94 [4.80, 5.07]      x1 ~1     4.94 0.07 0.00</span></span>
<span><span class="co">#&gt; 5       x2  rect      x2\n6.09 [5.96, 6.22]      x2 ~1     6.09 0.07 0.00</span></span>
<span><span class="co">#&gt; 6       x3  rect      x3\n2.25 [2.12, 2.38]      x3 ~1     2.25 0.07 0.00</span></span>
<span><span class="co">#&gt; 7       x4  rect      x4\n3.06 [2.93, 3.19]      x4 ~1     3.06 0.07 0.00</span></span>
<span><span class="co">#&gt; 8       x5  rect      x5\n4.34 [4.19, 4.49]      x5 ~1     4.34 0.07 0.00</span></span>
<span><span class="co">#&gt; 9       x6  rect      x6\n2.19 [2.06, 2.31]      x6 ~1     2.19 0.06 0.00</span></span>
<span><span class="co">#&gt; 10      x7  rect      x7\n4.19 [4.06, 4.31]      x7 ~1     4.19 0.06 0.00</span></span>
<span><span class="co">#&gt; 11      x8  rect      x8\n5.53 [5.41, 5.64]      x8 ~1     5.53 0.06 0.00</span></span>
<span><span class="co">#&gt; 12      x9  rect      x9\n5.37 [5.26, 5.49]      x9 ~1     5.37 0.06 0.00</span></span>
<span><span class="co">#&gt;         confint est_sig est_std se_std pval_std  confint_std est_sig_std</span></span>
<span><span class="co">#&gt; 1  [0.00, 0.00]    0.00    0.00   0.00     &lt;NA&gt; [0.00, 0.00]        0.00</span></span>
<span><span class="co">#&gt; 2  [0.00, 0.00]    0.00    0.00   0.00     &lt;NA&gt; [0.00, 0.00]        0.00</span></span>
<span><span class="co">#&gt; 3  [0.00, 0.00]    0.00    0.00   0.00     &lt;NA&gt; [0.00, 0.00]        0.00</span></span>
<span><span class="co">#&gt; 4  [4.80, 5.07] 4.94***    4.23   0.18     0.00 [3.88, 4.59]     4.23***</span></span>
<span><span class="co">#&gt; 5  [5.96, 6.22] 6.09***    5.18   0.22     0.00 [4.75, 5.61]     5.18***</span></span>
<span><span class="co">#&gt; 6  [2.12, 2.38] 2.25***    1.99   0.10     0.00 [1.80, 2.19]     1.99***</span></span>
<span><span class="co">#&gt; 7  [2.93, 3.19] 3.06***    2.63   0.12     0.00 [2.39, 2.87]     2.63***</span></span>
<span><span class="co">#&gt; 8  [4.19, 4.49] 4.34***    3.37   0.15     0.00 [3.08, 3.66]     3.37***</span></span>
<span><span class="co">#&gt; 9  [2.06, 2.31] 2.19***    2.00   0.10     0.00 [1.80, 2.19]     2.00***</span></span>
<span><span class="co">#&gt; 10 [4.06, 4.31] 4.19***    3.85   0.17     0.00 [3.52, 4.18]     3.85***</span></span>
<span><span class="co">#&gt; 11 [5.41, 5.64] 5.53***    5.47   0.23     0.00 [5.02, 5.92]     5.47***</span></span>
<span><span class="co">#&gt; 12 [5.26, 5.49] 5.37***    5.33   0.22     0.00 [4.89, 5.78]     5.33***</span></span>
<span><span class="co">#&gt;    label_results</span></span>
<span><span class="co">#&gt; 1    Means.speed</span></span>
<span><span class="co">#&gt; 2  Means.textual</span></span>
<span><span class="co">#&gt; 3   Means.visual</span></span>
<span><span class="co">#&gt; 4       Means.x1</span></span>
<span><span class="co">#&gt; 5       Means.x2</span></span>
<span><span class="co">#&gt; 6       Means.x3</span></span>
<span><span class="co">#&gt; 7       Means.x4</span></span>
<span><span class="co">#&gt; 8       Means.x5</span></span>
<span><span class="co">#&gt; 9       Means.x6</span></span>
<span><span class="co">#&gt; 10      Means.x7</span></span>
<span><span class="co">#&gt; 11      Means.x8</span></span>
<span><span class="co">#&gt; 12      Means.x9</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="customize-labels-of-a-sem_graph">Customize labels of a <code>sem_graph</code><a class="anchor" aria-label="anchor" href="#customize-labels-of-a-sem_graph"></a>
</h4>
<p>Instead of customizing the node and edge labels in the call to
<code><a href="../reference/get_nodes.html">get_nodes()</a></code> and <code><a href="../reference/get_edges.html">get_edges()</a></code>, it is also
possible to use the auxiliary columns in the <code>nodes</code> and
<code>edges</code> elements of a <code>sem_graph</code> object to
customize the labels (or other properties of the plot) later. First,
let’s generate a <code>sem_graph</code> object and examine the
<code>edges</code> element:
<!-- Refer back to the output above of `get_edges(fit)` to see that, by default, -->
<!-- all columns returned by `table_results()` are included. -->
<!-- Let's use these columns  --></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/edges.html">edges</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="co">#&gt;       from      to arrow   label connect_from connect_to curvature linetype</span></span>
<span><span class="co">#&gt; 1   visual      x1  last    1.00       bottom        top        NA        1</span></span>
<span><span class="co">#&gt; 2   visual      x2  last 0.55***       bottom       left        NA        1</span></span>
<span><span class="co">#&gt; 3   visual      x3  last 0.73***        right       left        NA        1</span></span>
<span><span class="co">#&gt; 4  textual      x4  last    1.00       bottom      right        NA        1</span></span>
<span><span class="co">#&gt; 5  textual      x5  last 1.11***       bottom        top        NA        1</span></span>
<span><span class="co">#&gt; 6  textual      x6  last 0.93***       bottom       left        NA        1</span></span>
<span><span class="co">#&gt; 7    speed      x7  last    1.00       bottom      right        NA        1</span></span>
<span><span class="co">#&gt; 8    speed      x8  last 1.18***       bottom        top        NA        1</span></span>
<span><span class="co">#&gt; 9    speed      x9  last 1.08***       bottom       left        NA        1</span></span>
<span><span class="co">#&gt; 10      x1      x1  both 0.55***       bottom     bottom        NA        1</span></span>
<span><span class="co">#&gt; 11      x2      x2  both 1.13***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 12      x3      x3  both 0.84***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 13      x4      x4  both 0.37***         left       left        NA        1</span></span>
<span><span class="co">#&gt; 14      x5      x5  both 0.45***       bottom     bottom        NA        1</span></span>
<span><span class="co">#&gt; 15      x6      x6  both 0.36***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 16      x7      x7  both 0.80***         left       left        NA        1</span></span>
<span><span class="co">#&gt; 17      x8      x8  both 0.49***       bottom     bottom        NA        1</span></span>
<span><span class="co">#&gt; 18      x9      x9  both 0.57***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 19  visual  visual  both 0.81***          top        top        NA        1</span></span>
<span><span class="co">#&gt; 20 textual textual  both 0.98***          top        top        NA        1</span></span>
<span><span class="co">#&gt; 21   speed   speed  both 0.38***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 22  visual textual  none 0.41***         left      right        60        2</span></span>
<span><span class="co">#&gt; 23  visual   speed  none 0.26***       bottom        top        60        2</span></span>
<span><span class="co">#&gt; 24 textual   speed  none 0.17***        right       left        60        2</span></span>
<span><span class="co">#&gt;        lhs op     rhs  est   se pval      confint est_sig est_std se_std</span></span>
<span><span class="co">#&gt; 1   visual =~      x1 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.77   0.05</span></span>
<span><span class="co">#&gt; 2   visual =~      x2 0.55 0.10 0.00 [0.36, 0.75] 0.55***    0.42   0.06</span></span>
<span><span class="co">#&gt; 3   visual =~      x3 0.73 0.11 0.00 [0.52, 0.94] 0.73***    0.58   0.06</span></span>
<span><span class="co">#&gt; 4  textual =~      x4 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.85   0.02</span></span>
<span><span class="co">#&gt; 5  textual =~      x5 1.11 0.07 0.00 [0.98, 1.24] 1.11***    0.86   0.02</span></span>
<span><span class="co">#&gt; 6  textual =~      x6 0.93 0.06 0.00 [0.82, 1.03] 0.93***    0.84   0.02</span></span>
<span><span class="co">#&gt; 7    speed =~      x7 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.57   0.05</span></span>
<span><span class="co">#&gt; 8    speed =~      x8 1.18 0.16 0.00 [0.86, 1.50] 1.18***    0.72   0.05</span></span>
<span><span class="co">#&gt; 9    speed =~      x9 1.08 0.15 0.00 [0.79, 1.38] 1.08***    0.67   0.05</span></span>
<span><span class="co">#&gt; 10      x1 ~~      x1 0.55 0.11 0.00 [0.33, 0.77] 0.55***    0.40   0.08</span></span>
<span><span class="co">#&gt; 11      x2 ~~      x2 1.13 0.10 0.00 [0.93, 1.33] 1.13***    0.82   0.05</span></span>
<span><span class="co">#&gt; 12      x3 ~~      x3 0.84 0.09 0.00 [0.67, 1.02] 0.84***    0.66   0.06</span></span>
<span><span class="co">#&gt; 13      x4 ~~      x4 0.37 0.05 0.00 [0.28, 0.46] 0.37***    0.27   0.04</span></span>
<span><span class="co">#&gt; 14      x5 ~~      x5 0.45 0.06 0.00 [0.33, 0.56] 0.45***    0.27   0.04</span></span>
<span><span class="co">#&gt; 15      x6 ~~      x6 0.36 0.04 0.00 [0.27, 0.44] 0.36***    0.30   0.04</span></span>
<span><span class="co">#&gt; 16      x7 ~~      x7 0.80 0.08 0.00 [0.64, 0.96] 0.80***    0.68   0.06</span></span>
<span><span class="co">#&gt; 17      x8 ~~      x8 0.49 0.07 0.00 [0.34, 0.63] 0.49***    0.48   0.07</span></span>
<span><span class="co">#&gt; 18      x9 ~~      x9 0.57 0.07 0.00 [0.43, 0.70] 0.57***    0.56   0.07</span></span>
<span><span class="co">#&gt; 19  visual ~~  visual 0.81 0.15 0.00 [0.52, 1.09] 0.81***    1.00   0.00</span></span>
<span><span class="co">#&gt; 20 textual ~~ textual 0.98 0.11 0.00 [0.76, 1.20] 0.98***    1.00   0.00</span></span>
<span><span class="co">#&gt; 21   speed ~~   speed 0.38 0.09 0.00 [0.21, 0.55] 0.38***    1.00   0.00</span></span>
<span><span class="co">#&gt; 22  visual ~~ textual 0.41 0.07 0.00 [0.26, 0.55] 0.41***    0.46   0.06</span></span>
<span><span class="co">#&gt; 23  visual ~~   speed 0.26 0.06 0.00 [0.15, 0.37] 0.26***    0.47   0.07</span></span>
<span><span class="co">#&gt; 24 textual ~~   speed 0.17 0.05 0.00 [0.08, 0.27] 0.17***    0.28   0.07</span></span>
<span><span class="co">#&gt;    pval_std  confint_std est_sig_std       label_results show</span></span>
<span><span class="co">#&gt; 1      0.00 [0.66, 0.88]     0.77***        visual.BY.x1 TRUE</span></span>
<span><span class="co">#&gt; 2      0.00 [0.31, 0.54]     0.42***        visual.BY.x2 TRUE</span></span>
<span><span class="co">#&gt; 3      0.00 [0.47, 0.69]     0.58***        visual.BY.x3 TRUE</span></span>
<span><span class="co">#&gt; 4      0.00 [0.81, 0.90]     0.85***       textual.BY.x4 TRUE</span></span>
<span><span class="co">#&gt; 5      0.00 [0.81, 0.90]     0.86***       textual.BY.x5 TRUE</span></span>
<span><span class="co">#&gt; 6      0.00 [0.79, 0.88]     0.84***       textual.BY.x6 TRUE</span></span>
<span><span class="co">#&gt; 7      0.00 [0.47, 0.67]     0.57***         speed.BY.x7 TRUE</span></span>
<span><span class="co">#&gt; 8      0.00 [0.62, 0.82]     0.72***         speed.BY.x8 TRUE</span></span>
<span><span class="co">#&gt; 9      0.00 [0.56, 0.77]     0.67***         speed.BY.x9 TRUE</span></span>
<span><span class="co">#&gt; 10     0.00 [0.24, 0.57]     0.40***        Variances.x1 TRUE</span></span>
<span><span class="co">#&gt; 11     0.00 [0.72, 0.92]     0.82***        Variances.x2 TRUE</span></span>
<span><span class="co">#&gt; 12     0.00 [0.54, 0.79]     0.66***        Variances.x3 TRUE</span></span>
<span><span class="co">#&gt; 13     0.00 [0.20, 0.35]     0.27***        Variances.x4 TRUE</span></span>
<span><span class="co">#&gt; 14     0.00 [0.19, 0.34]     0.27***        Variances.x5 TRUE</span></span>
<span><span class="co">#&gt; 15     0.00 [0.22, 0.37]     0.30***        Variances.x6 TRUE</span></span>
<span><span class="co">#&gt; 16     0.00 [0.56, 0.79]     0.68***        Variances.x7 TRUE</span></span>
<span><span class="co">#&gt; 17     0.00 [0.33, 0.62]     0.48***        Variances.x8 TRUE</span></span>
<span><span class="co">#&gt; 18     0.00 [0.42, 0.69]     0.56***        Variances.x9 TRUE</span></span>
<span><span class="co">#&gt; 19     &lt;NA&gt; [1.00, 1.00]        1.00    Variances.visual TRUE</span></span>
<span><span class="co">#&gt; 20     &lt;NA&gt; [1.00, 1.00]        1.00   Variances.textual TRUE</span></span>
<span><span class="co">#&gt; 21     &lt;NA&gt; [1.00, 1.00]        1.00     Variances.speed TRUE</span></span>
<span><span class="co">#&gt; 22     0.00 [0.33, 0.58]     0.46*** visual.WITH.textual TRUE</span></span>
<span><span class="co">#&gt; 23     0.00 [0.33, 0.61]     0.47***   visual.WITH.speed TRUE</span></span>
<span><span class="co">#&gt; 24     0.00 [0.15, 0.42]     0.28***  textual.WITH.speed TRUE</span></span></code></pre></div>
<p>All of the columns in the edges element can be used to manually
construct labels, using the <code><a href="../reference/edit_graph.html">edit_graph()</a></code> function:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/edit_graph.html">edit_graph</a></span><span class="op">(</span><span class="op">{</span> <span class="va">label</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">est_sig_std</span>, <span class="st">"\n"</span>, <span class="va">confint_std</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-29-1.png" width="700"></p>
<p>The same can be done for the node labels:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/edit_graph.html">edit_graph</a></span><span class="op">(</span><span class="op">{</span> <span class="va">label</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">est_sig_std</span>, <span class="st">"\n"</span>, <span class="va">confint_std</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/edit_graph.html">edit_graph</a></span><span class="op">(</span><span class="op">{</span> <span class="va">label</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">name</span>, <span class="st">"\n"</span>, <span class="va">est_sig_std</span>, <span class="st">"\n"</span>, <span class="va">confint_std</span><span class="op">)</span> <span class="op">}</span>, element <span class="op">=</span> <span class="st">"nodes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-30-1.png" width="700"></p>
<p>Note that, by specifying both <code>"nodes"</code> and
<code>"edges")</code>, both nodes and edges are edited - but in the
preceding example, we actually want different labels for the nodes and
edges (so that node labels are shown). For example, we can change the
label color for both nodes and edges:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/edit_graph.html">edit_graph</a></span><span class="op">(</span><span class="op">{</span> <span class="va">label_color</span> <span class="op">=</span> <span class="st">"blue"</span> <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="Plotting_graphs_files/figure-html/unnamed-chunk-31-1.png" width="700"></p>
<p>The section on <strong>Visual aspects</strong> further demonstrates
how to use these auxiliary columns to customize visual properties of the
graph.</p>
</div>
</div>
<div class="section level3">
<h3 id="optional-step-5-accessing-graph-data-before-plotting">Optional step 5: accessing graph data before plotting<a class="anchor" aria-label="anchor" href="#optional-step-5-accessing-graph-data-before-plotting"></a>
</h3>
<p>One important feature of <code>tidySEM</code> graphing is that the
data used to compose the plot can be conveniently accessed an modified
before plotting. First, use <code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> to assign the
plot data to an object.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graph_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">fit</span>, layout <span class="op">=</span> <span class="va">lay</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="optional-step-6-access-the-nodes-and-edges">Optional step 6: Access the nodes and edges<a class="anchor" aria-label="anchor" href="#optional-step-6-access-the-nodes-and-edges"></a>
</h3>
<p>The nodes and edges can be examined using
<code>nodes(graph_data)</code> and <code>edges(graph_data)</code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nodes.html">nodes</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       name shape         label  x y node_xmin node_xmax node_ymin node_ymax</span></span>
<span><span class="co">#&gt; 1    speed  oval   speed\n0.00 14 4      13.5      14.5       3.5       4.5</span></span>
<span><span class="co">#&gt; 2  textual  oval textual\n0.00 10 4       9.5      10.5       3.5       4.5</span></span>
<span><span class="co">#&gt; 3   visual  oval  visual\n0.00  6 4       5.5       6.5       3.5       4.5</span></span>
<span><span class="co">#&gt; 4       x1  rect   x1\n4.94***  2 2       1.4       2.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 5       x2  rect   x2\n6.09***  4 2       3.4       4.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 6       x3  rect   x3\n2.25***  6 2       5.4       6.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 7       x4  rect   x4\n3.06***  8 2       7.4       8.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 8       x5  rect   x5\n4.34*** 10 2       9.4      10.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 9       x6  rect   x6\n2.19*** 12 2      11.4      12.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 10      x7  rect   x7\n4.19*** 14 2      13.4      14.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 11      x8  rect   x8\n5.53*** 16 2      15.4      16.6       1.6       2.4</span></span>
<span><span class="co">#&gt; 12      x9  rect   x9\n5.37*** 18 2      17.4      18.6       1.6       2.4</span></span>
<span><span class="co">#&gt;        lhs op rhs  est   se pval      confint est_sig est_std se_std pval_std</span></span>
<span><span class="co">#&gt; 1    speed ~1     0.00 0.00 &lt;NA&gt; [0.00, 0.00]    0.00    0.00   0.00     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  textual ~1     0.00 0.00 &lt;NA&gt; [0.00, 0.00]    0.00    0.00   0.00     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3   visual ~1     0.00 0.00 &lt;NA&gt; [0.00, 0.00]    0.00    0.00   0.00     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4       x1 ~1     4.94 0.07 0.00 [4.80, 5.07] 4.94***    4.23   0.18     0.00</span></span>
<span><span class="co">#&gt; 5       x2 ~1     6.09 0.07 0.00 [5.96, 6.22] 6.09***    5.18   0.22     0.00</span></span>
<span><span class="co">#&gt; 6       x3 ~1     2.25 0.07 0.00 [2.12, 2.38] 2.25***    1.99   0.10     0.00</span></span>
<span><span class="co">#&gt; 7       x4 ~1     3.06 0.07 0.00 [2.93, 3.19] 3.06***    2.63   0.12     0.00</span></span>
<span><span class="co">#&gt; 8       x5 ~1     4.34 0.07 0.00 [4.19, 4.49] 4.34***    3.37   0.15     0.00</span></span>
<span><span class="co">#&gt; 9       x6 ~1     2.19 0.06 0.00 [2.06, 2.31] 2.19***    2.00   0.10     0.00</span></span>
<span><span class="co">#&gt; 10      x7 ~1     4.19 0.06 0.00 [4.06, 4.31] 4.19***    3.85   0.17     0.00</span></span>
<span><span class="co">#&gt; 11      x8 ~1     5.53 0.06 0.00 [5.41, 5.64] 5.53***    5.47   0.23     0.00</span></span>
<span><span class="co">#&gt; 12      x9 ~1     5.37 0.06 0.00 [5.26, 5.49] 5.37***    5.33   0.22     0.00</span></span>
<span><span class="co">#&gt;     confint_std est_sig_std label_results show</span></span>
<span><span class="co">#&gt; 1  [0.00, 0.00]        0.00   Means.speed TRUE</span></span>
<span><span class="co">#&gt; 2  [0.00, 0.00]        0.00 Means.textual TRUE</span></span>
<span><span class="co">#&gt; 3  [0.00, 0.00]        0.00  Means.visual TRUE</span></span>
<span><span class="co">#&gt; 4  [3.88, 4.59]     4.23***      Means.x1 TRUE</span></span>
<span><span class="co">#&gt; 5  [4.75, 5.61]     5.18***      Means.x2 TRUE</span></span>
<span><span class="co">#&gt; 6  [1.80, 2.19]     1.99***      Means.x3 TRUE</span></span>
<span><span class="co">#&gt; 7  [2.39, 2.87]     2.63***      Means.x4 TRUE</span></span>
<span><span class="co">#&gt; 8  [3.08, 3.66]     3.37***      Means.x5 TRUE</span></span>
<span><span class="co">#&gt; 9  [1.80, 2.19]     2.00***      Means.x6 TRUE</span></span>
<span><span class="co">#&gt; 10 [3.52, 4.18]     3.85***      Means.x7 TRUE</span></span>
<span><span class="co">#&gt; 11 [5.02, 5.92]     5.47***      Means.x8 TRUE</span></span>
<span><span class="co">#&gt; 12 [4.89, 5.78]     5.33***      Means.x9 TRUE</span></span>
<span><span class="fu"><a href="../reference/edges.html">edges</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;       from      to arrow   label connect_from connect_to curvature linetype</span></span>
<span><span class="co">#&gt; 1   visual      x1  last    1.00         left      right        NA        1</span></span>
<span><span class="co">#&gt; 2   visual      x2  last 0.55***       bottom      right        NA        1</span></span>
<span><span class="co">#&gt; 3   visual      x3  last 0.73***       bottom        top        NA        1</span></span>
<span><span class="co">#&gt; 4  textual      x4  last    1.00       bottom      right        NA        1</span></span>
<span><span class="co">#&gt; 5  textual      x5  last 1.11***       bottom        top        NA        1</span></span>
<span><span class="co">#&gt; 6  textual      x6  last 0.93***       bottom       left        NA        1</span></span>
<span><span class="co">#&gt; 7    speed      x7  last    1.00       bottom        top        NA        1</span></span>
<span><span class="co">#&gt; 8    speed      x8  last 1.18***       bottom       left        NA        1</span></span>
<span><span class="co">#&gt; 9    speed      x9  last 1.08***        right       left        NA        1</span></span>
<span><span class="co">#&gt; 10      x1      x1  both 0.55***         left       left        NA        1</span></span>
<span><span class="co">#&gt; 11      x2      x2  both 1.13***         left       left        NA        1</span></span>
<span><span class="co">#&gt; 12      x3      x3  both 0.84***       bottom     bottom        NA        1</span></span>
<span><span class="co">#&gt; 13      x4      x4  both 0.37***         left       left        NA        1</span></span>
<span><span class="co">#&gt; 14      x5      x5  both 0.45***       bottom     bottom        NA        1</span></span>
<span><span class="co">#&gt; 15      x6      x6  both 0.36***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 16      x7      x7  both 0.80***       bottom     bottom        NA        1</span></span>
<span><span class="co">#&gt; 17      x8      x8  both 0.49***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 18      x9      x9  both 0.57***        right      right        NA        1</span></span>
<span><span class="co">#&gt; 19  visual  visual  both 0.81***          top        top        NA        1</span></span>
<span><span class="co">#&gt; 20 textual textual  both 0.98***          top        top        NA        1</span></span>
<span><span class="co">#&gt; 21   speed   speed  both 0.38***          top        top        NA        1</span></span>
<span><span class="co">#&gt; 22  visual textual  none 0.41***        right       left        60        2</span></span>
<span><span class="co">#&gt; 23  visual   speed  none 0.26***        right       left        60        2</span></span>
<span><span class="co">#&gt; 24 textual   speed  none 0.17***        right       left        60        2</span></span>
<span><span class="co">#&gt;        lhs op     rhs  est   se pval      confint est_sig est_std se_std</span></span>
<span><span class="co">#&gt; 1   visual =~      x1 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.77   0.05</span></span>
<span><span class="co">#&gt; 2   visual =~      x2 0.55 0.10 0.00 [0.36, 0.75] 0.55***    0.42   0.06</span></span>
<span><span class="co">#&gt; 3   visual =~      x3 0.73 0.11 0.00 [0.52, 0.94] 0.73***    0.58   0.06</span></span>
<span><span class="co">#&gt; 4  textual =~      x4 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.85   0.02</span></span>
<span><span class="co">#&gt; 5  textual =~      x5 1.11 0.07 0.00 [0.98, 1.24] 1.11***    0.86   0.02</span></span>
<span><span class="co">#&gt; 6  textual =~      x6 0.93 0.06 0.00 [0.82, 1.03] 0.93***    0.84   0.02</span></span>
<span><span class="co">#&gt; 7    speed =~      x7 1.00 0.00 &lt;NA&gt; [1.00, 1.00]    1.00    0.57   0.05</span></span>
<span><span class="co">#&gt; 8    speed =~      x8 1.18 0.16 0.00 [0.86, 1.50] 1.18***    0.72   0.05</span></span>
<span><span class="co">#&gt; 9    speed =~      x9 1.08 0.15 0.00 [0.79, 1.38] 1.08***    0.67   0.05</span></span>
<span><span class="co">#&gt; 10      x1 ~~      x1 0.55 0.11 0.00 [0.33, 0.77] 0.55***    0.40   0.08</span></span>
<span><span class="co">#&gt; 11      x2 ~~      x2 1.13 0.10 0.00 [0.93, 1.33] 1.13***    0.82   0.05</span></span>
<span><span class="co">#&gt; 12      x3 ~~      x3 0.84 0.09 0.00 [0.67, 1.02] 0.84***    0.66   0.06</span></span>
<span><span class="co">#&gt; 13      x4 ~~      x4 0.37 0.05 0.00 [0.28, 0.46] 0.37***    0.27   0.04</span></span>
<span><span class="co">#&gt; 14      x5 ~~      x5 0.45 0.06 0.00 [0.33, 0.56] 0.45***    0.27   0.04</span></span>
<span><span class="co">#&gt; 15      x6 ~~      x6 0.36 0.04 0.00 [0.27, 0.44] 0.36***    0.30   0.04</span></span>
<span><span class="co">#&gt; 16      x7 ~~      x7 0.80 0.08 0.00 [0.64, 0.96] 0.80***    0.68   0.06</span></span>
<span><span class="co">#&gt; 17      x8 ~~      x8 0.49 0.07 0.00 [0.34, 0.63] 0.49***    0.48   0.07</span></span>
<span><span class="co">#&gt; 18      x9 ~~      x9 0.57 0.07 0.00 [0.43, 0.70] 0.57***    0.56   0.07</span></span>
<span><span class="co">#&gt; 19  visual ~~  visual 0.81 0.15 0.00 [0.52, 1.09] 0.81***    1.00   0.00</span></span>
<span><span class="co">#&gt; 20 textual ~~ textual 0.98 0.11 0.00 [0.76, 1.20] 0.98***    1.00   0.00</span></span>
<span><span class="co">#&gt; 21   speed ~~   speed 0.38 0.09 0.00 [0.21, 0.55] 0.38***    1.00   0.00</span></span>
<span><span class="co">#&gt; 22  visual ~~ textual 0.41 0.07 0.00 [0.26, 0.55] 0.41***    0.46   0.06</span></span>
<span><span class="co">#&gt; 23  visual ~~   speed 0.26 0.06 0.00 [0.15, 0.37] 0.26***    0.47   0.07</span></span>
<span><span class="co">#&gt; 24 textual ~~   speed 0.17 0.05 0.00 [0.08, 0.27] 0.17***    0.28   0.07</span></span>
<span><span class="co">#&gt;    pval_std  confint_std est_sig_std       label_results show</span></span>
<span><span class="co">#&gt; 1      0.00 [0.66, 0.88]     0.77***        visual.BY.x1 TRUE</span></span>
<span><span class="co">#&gt; 2      0.00 [0.31, 0.54]     0.42***        visual.BY.x2 TRUE</span></span>
<span><span class="co">#&gt; 3      0.00 [0.47, 0.69]     0.58***        visual.BY.x3 TRUE</span></span>
<span><span class="co">#&gt; 4      0.00 [0.81, 0.90]     0.85***       textual.BY.x4 TRUE</span></span>
<span><span class="co">#&gt; 5      0.00 [0.81, 0.90]     0.86***       textual.BY.x5 TRUE</span></span>
<span><span class="co">#&gt; 6      0.00 [0.79, 0.88]     0.84***       textual.BY.x6 TRUE</span></span>
<span><span class="co">#&gt; 7      0.00 [0.47, 0.67]     0.57***         speed.BY.x7 TRUE</span></span>
<span><span class="co">#&gt; 8      0.00 [0.62, 0.82]     0.72***         speed.BY.x8 TRUE</span></span>
<span><span class="co">#&gt; 9      0.00 [0.56, 0.77]     0.67***         speed.BY.x9 TRUE</span></span>
<span><span class="co">#&gt; 10     0.00 [0.24, 0.57]     0.40***        Variances.x1 TRUE</span></span>
<span><span class="co">#&gt; 11     0.00 [0.72, 0.92]     0.82***        Variances.x2 TRUE</span></span>
<span><span class="co">#&gt; 12     0.00 [0.54, 0.79]     0.66***        Variances.x3 TRUE</span></span>
<span><span class="co">#&gt; 13     0.00 [0.20, 0.35]     0.27***        Variances.x4 TRUE</span></span>
<span><span class="co">#&gt; 14     0.00 [0.19, 0.34]     0.27***        Variances.x5 TRUE</span></span>
<span><span class="co">#&gt; 15     0.00 [0.22, 0.37]     0.30***        Variances.x6 TRUE</span></span>
<span><span class="co">#&gt; 16     0.00 [0.56, 0.79]     0.68***        Variances.x7 TRUE</span></span>
<span><span class="co">#&gt; 17     0.00 [0.33, 0.62]     0.48***        Variances.x8 TRUE</span></span>
<span><span class="co">#&gt; 18     0.00 [0.42, 0.69]     0.56***        Variances.x9 TRUE</span></span>
<span><span class="co">#&gt; 19     &lt;NA&gt; [1.00, 1.00]        1.00    Variances.visual TRUE</span></span>
<span><span class="co">#&gt; 20     &lt;NA&gt; [1.00, 1.00]        1.00   Variances.textual TRUE</span></span>
<span><span class="co">#&gt; 21     &lt;NA&gt; [1.00, 1.00]        1.00     Variances.speed TRUE</span></span>
<span><span class="co">#&gt; 22     0.00 [0.33, 0.58]     0.46*** visual.WITH.textual TRUE</span></span>
<span><span class="co">#&gt; 23     0.00 [0.33, 0.61]     0.47***   visual.WITH.speed TRUE</span></span>
<span><span class="co">#&gt; 24     0.00 [0.15, 0.42]     0.28***  textual.WITH.speed TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="optional-step-7-modify-the-nodes-and-edges">Optional step 7: Modify the nodes and edges<a class="anchor" aria-label="anchor" href="#optional-step-7-modify-the-nodes-and-edges"></a>
</h3>
<p>At this stage, we may want to improve the basic plot slightly. The
functions <code>nodes(graph_data) &lt;- ...</code> and
<code>edges(graph_data) &lt;- ...</code> can be used to modify the nodes
and edges. These functions pair well with the general ‘tidyverse’
workflow. For example, we might want to print node labels for latent
variables in <em>Title Case</em> instead of just using the variable
names:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/nodes.html">nodes</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nodes.html">nodes</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_title</a></span><span class="op">(</span><span class="va">label</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now, for the edges, we see that the default edging algorithm has
connected some nodes side-to-side (based on the smallest possible
Euclidian distance). However, in this simple graph, it makes more sense
to connect all nodes top-to-bottom - except for the latent variable
covariances. We can use the same conditional replacement for the
edges:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/edges.html">edges</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>connect_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">connect_from</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">curvature</span><span class="op">)</span>, <span class="st">"bottom"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>connect_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">connect_to</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">curvature</span><span class="op">)</span>, <span class="st">"top"</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="fu"><a href="../reference/edges.html">edges</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot-the-customized-graph">Plot the customized graph<a class="anchor" aria-label="anchor" href="#plot-the-customized-graph"></a>
</h3>
<p>We can plot a customized graph using <code>plot(graph_data)</code>; a
generic plot method for <code>sem_graph</code> objects:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig2.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="connecting-nodes">Connecting nodes<a class="anchor" aria-label="anchor" href="#connecting-nodes"></a>
</h2>
<p>The functions <code><a href="../reference/graph_sem.html">graph_sem()</a></code> and
<code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> will always try to connect nodes in an
aesthetically pleasing way. To do this, they connect nodes by one of the
four sides (top, bottom, left and right), based on the shortest distance
between two nodes. Alternatively, users can specify a value to the
<code>angle</code> parameter. This parameter connects nodes
top-to-bottom when they are within <code>angle</code> degrees above and
below each other. Remaining nodes are connected side-to-side. Thus, by
increasing <code>angle</code> to a larger number (up to 180 degrees), we
can also ensure that all nodes are connected top to bottom:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/graph_sem.html">graph_sem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">fit</span>, layout <span class="op">=</span> <span class="va">lay</span>, angle <span class="op">=</span> <span class="fl">170</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig3.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="visual-aspects">Visual aspects<a class="anchor" aria-label="anchor" href="#visual-aspects"></a>
</h2>
<p>The visual aspects of graphs created using <code><a href="../reference/graph_sem.html">graph_sem()</a></code>
and <code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> can be easily customized (see
<code>?graph_sem()</code>). These functions construct a graph based on a
data.frame of nodes, and a data.frame of edges. The visual aspects can
be customized by adding <strong>extra columns</strong> to those
data.frames.</p>
<div class="section level3">
<h3 id="visual-aspects-of-edges">Visual aspects of edges<a class="anchor" aria-label="anchor" href="#visual-aspects-of-edges"></a>
</h3>
<p>Edges have the following aesthetics (see
<code>?geom_path()</code>):</p>
<ul>
<li>
<code>linetype</code>: The type of line, e.g., continuous
(<code>linetype = 1</code> or dashed <code>linetype = 2</code>)</li>
<li>
<code>colour</code> or <code>color</code>: The color of the line
(e.g., <code>colour = "red"</code> or <code>colour = "blue"</code>)</li>
<li>
<code>size</code>: The size of the line (e.g., <code>size = 1</code>
or <code>size = 2</code>)</li>
<li>
<code>alpha</code>: The transparency of the line (e.g.,
<code>alpha = 1</code> or <code>alpha = .2</code>)</li>
</ul>
<p>These aesthetics can be customized by adding columns to the edges
data.frame, whose names correspond to the aesthetics. For example:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>                  to <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>                  linetype <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                  colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                  size <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                  alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/graph_sem.html">graph_sem</a></span><span class="op">(</span>edges <span class="op">=</span> <span class="va">edg</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, rows <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig4.png" width="30%"></p>
</div>
<div class="section level3">
<h3 id="visual-aspects-of-nodes">Visual aspects of nodes<a class="anchor" aria-label="anchor" href="#visual-aspects-of-nodes"></a>
</h3>
<p>Nodes have the following aesthetics (see
<code>?geom_polygon()</code>):</p>
<ul>
<li>
<code>linetype</code>: The type of line surrounding the node, e.g.,
continuous (<code>linetype = 1</code> or dashed
<code>linetype = 2</code>)</li>
<li>
<code>colour</code> or <code>color</code>: The color of the line
surrounding the node (e.g., <code>colour = "red"</code> or
<code>colour = "blue"</code>)</li>
<li>
<code>fill</code>: The interior color of the node (e.g.,
<code>colour = "red"</code> or <code>colour = "blue"</code>)</li>
<li>
<code>size</code>: The size of the line (e.g., <code>size = 1</code>
or <code>size = 2</code>)</li>
<li>
<code>alpha</code>: The transparency of the node (e.g.,
<code>alpha = 1</code> or <code>alpha = .2</code>)</li>
</ul>
<p>These, too, can be appended as extra columns to the nodes
data.frame:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>                  to <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span>
<span><span class="va">nod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>,</span>
<span>                    shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rect"</span>, <span class="st">"oval"</span><span class="op">)</span>,</span>
<span>                    linetype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                    colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>                    fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>                    size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                    alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/graph_sem.html">graph_sem</a></span><span class="op">(</span>edges <span class="op">=</span> <span class="va">edg</span>, nodes <span class="op">=</span> <span class="va">nod</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, rows <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig5.png" width="30%"></p>
<p>These aesthetics can also be passed to the <code>sem_graph</code>
object after preparing the data, for example, for highlighting a
specific model element, such as the low factor loading for x2 on visual
in the CFA example from before:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/edges.html">edges</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">colour</span>, <span class="va">from</span> <span class="op">==</span> <span class="st">"visual"</span> <span class="op">&amp;</span> <span class="va">to</span> <span class="op">==</span> <span class="st">"x2"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">linetype</span>, <span class="va">from</span> <span class="op">==</span> <span class="st">"visual"</span> <span class="op">&amp;</span> <span class="va">to</span> <span class="op">==</span> <span class="st">"x2"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span><span class="va">alpha</span>, <span class="va">from</span> <span class="op">==</span> <span class="st">"visual"</span> <span class="op">&amp;</span> <span class="va">to</span> <span class="op">==</span> <span class="st">"x2"</span>, <span class="fl">.5</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="fu"><a href="../reference/edges.html">edges</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">graph_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig6.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="visual-aspects-of-edge-labels">Visual aspects of edge labels<a class="anchor" aria-label="anchor" href="#visual-aspects-of-edge-labels"></a>
</h3>
<p>Like nodes and edges, edge labels can be customized. Labels have the
same aesthetics as the ggplot function <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label()</a></code> (see
<code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">?geom_label</a></code>). However, to disambiguate them from the edge
aesthetics, all label aesthetics are prefaced by
<code>"label_"</code>:</p>
<ul>
<li>
<code>label_colour</code> or <code>label_color</code>: The color of
the label text (e.g., <code>label_colour = "red"</code>)</li>
<li>
<code>label_fill</code>: The color of the rectangle behind the label
text, ( e.g., <code>label_fill = "blue"</code>)</li>
<li>
<code>label_size</code>: The font size of the label (e.g.,
<code>label_size = 4</code>)</li>
<li>
<code>label_alpha</code>: The transparency of the label (e.g.,
<code>alpha = 1</code> or <code>alpha = .2</code>)</li>
<li>
<code>label_family</code>: The font family of the label text. By
default, three are available: <code>"serif"</code>, <code>"sans"</code>
and <code>"mono"</code>
</li>
<li>
<code>label_fontface</code>: The face of the label text:
<code>"plain"</code>, <code>"bold"</code>, <code>"italic"</code>, or
“<code>bold.italic"</code>
</li>
<li>
<code>label_hjust</code>: Horizontal justification of label text;
either a string (<code>"left"</code>, <code>"center"</code>,
<code>"right"</code>) or a number between 0 and 1 (left = 0, center =
0.5, right = 1)</li>
<li>
<code>label_vjust</code>: Vertical justification of label text;
either a string (<code>"top"</code>, <code>"middle"</code>,
<code>"bottom"</code>) or a number between 0 and 1 (top = 1, middle =
0.5, bottom = 0)</li>
<li>
<code>label_lineheight</code>: Line height for multiline text</li>
<li>
<code>label_location</code>: Where along the edge to plot the label;
a number between 0 (beginning) and 1 (end)</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>                  to <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>                  label <span class="op">=</span> <span class="st">"text"</span>,</span>
<span>                  label_colour <span class="op">=</span> <span class="st">"blue"</span>,</span>
<span>                  label_fill <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>                  label_size <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                  label_alpha <span class="op">=</span> <span class="fl">.5</span>,</span>
<span>                  label_family <span class="op">=</span> <span class="st">"mono"</span>,</span>
<span>                  label_fontface <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>                  label_hjust <span class="op">=</span> <span class="st">"left"</span>,</span>
<span>                  label_vjust <span class="op">=</span> <span class="st">"top"</span>,</span>
<span>                  label_lineheight <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>                  label_location <span class="op">=</span> <span class="fl">.2</span></span>
<span>                  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/graph_sem.html">graph_sem</a></span><span class="op">(</span>edges <span class="op">=</span> <span class="va">edg</span>, layout <span class="op">=</span> <span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, rows <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig7.png" width="30%"></p>
</div>
<div class="section level3">
<h3 id="conditionally-customize-visual-aspects">Conditionally customize visual aspects<a class="anchor" aria-label="anchor" href="#conditionally-customize-visual-aspects"></a>
</h3>
<p>The functions <code><a href="../reference/get_edges.html">get_edges()</a></code> and <code><a href="../reference/get_nodes.html">get_nodes()</a></code>
rely on <code><a href="../reference/table_results.html">table_results()</a></code> to extract information about nodes
and edges from SEM models. All of the columns returned by
<code><a href="../reference/table_results.html">table_results()</a></code> can be used to conditionally customize
visual aspects of the graph. Let’s estimate a model and look at all of
the columns extracted by <code><a href="../reference/get_edges.html">get_edges()</a></code>:</p>
<pre><code><span><span class="co">#&gt;   from  to arrow    label connect_from connect_to curvature linetype lhs op rhs</span></span>
<span><span class="co">#&gt; 1  cyl mpg  last -2.50***           NA         NA        NA        1 mpg  ~ cyl</span></span>
<span><span class="co">#&gt; 2   am mpg  last    2.57*           NA         NA        NA        1 mpg  ~  am</span></span>
<span><span class="co">#&gt; 3  mpg mpg  both  8.48***           NA         NA        NA        1 mpg ~~ mpg</span></span>
<span><span class="co">#&gt; 4  cyl cyl  both     3.09           NA         NA        NA        1 cyl ~~ cyl</span></span>
<span><span class="co">#&gt; 5  cyl  am  none    -0.45           NA         NA        60        2 cyl ~~  am</span></span>
<span><span class="co">#&gt; 6   am  am  both     0.24           NA         NA        NA        1  am ~~  am</span></span>
<span><span class="co">#&gt;     est   se pval        confint  est_sig est_std se_std pval_std</span></span>
<span><span class="co">#&gt; 1 -2.50 0.34 0.00 [-3.17, -1.83] -2.50***   -0.74   0.08     0.00</span></span>
<span><span class="co">#&gt; 2  2.57 1.23 0.04   [0.16, 4.98]    2.57*    0.21   0.10     0.03</span></span>
<span><span class="co">#&gt; 3  8.48 2.12 0.00  [4.32, 12.64]  8.48***    0.24   0.06     0.00</span></span>
<span><span class="co">#&gt; 4  3.09 0.00 &lt;NA&gt;   [3.09, 3.09]     3.09    1.00   0.00     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5 -0.45 0.00 &lt;NA&gt; [-0.45, -0.45]    -0.45   -0.52   0.00     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 6  0.24 0.00 &lt;NA&gt;   [0.24, 0.24]     0.24    1.00   0.00     &lt;NA&gt;</span></span>
<span><span class="co">#&gt;      confint_std est_sig_std label_results  show</span></span>
<span><span class="co">#&gt; 1 [-0.89, -0.59]    -0.74***    mpg.ON.cyl  TRUE</span></span>
<span><span class="co">#&gt; 2   [0.02, 0.41]       0.21*     mpg.ON.am  TRUE</span></span>
<span><span class="co">#&gt; 3   [0.13, 0.36]     0.24*** Variances.mpg  TRUE</span></span>
<span><span class="co">#&gt; 4   [1.00, 1.00]        1.00 Variances.cyl FALSE</span></span>
<span><span class="co">#&gt; 5 [-0.52, -0.52]       -0.52   cyl.WITH.am FALSE</span></span>
<span><span class="co">#&gt; 6   [1.00, 1.00]        1.00  Variances.am FALSE</span></span></code></pre>
<p>Any of these columns can be used to conditionally format the graph.
For example, note that one of the regression paths is positive and the
other negative. We might want to color positive edges green:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/if_edit.html">color_pos_edges</a></span><span class="op">(</span><span class="st">"green"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig8.png" width="300px"></p>
<p>However, the variance arrow is also colored green, because it is an
edge as well. This is where other conditional formatting functions come
in handy. Imagine we want to color the negative regression path red, and
color the variance black - and make the variance transparent as well, to
reduce its visual importance:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/if_edit.html">color_pos_edges</a></span><span class="op">(</span><span class="st">"green"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/if_edit.html">color_neg_edges</a></span><span class="op">(</span><span class="st">"red"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/if_edit.html">color_var</a></span><span class="op">(</span><span class="st">"black"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/if_edit.html">alpha_var</a></span><span class="op">(</span><span class="fl">.2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig9.png" width="300px"></p>
<p>There are many dedicated conditional customization functions like
these. They make use of the generic function <code><a href="../reference/if_edit.html">if_edit()</a></code>, and
are documented in its help file (see <code><a href="../reference/if_edit.html">?if_edit</a></code>).</p>
<p>The function <code><a href="../reference/if_edit.html">if_edit()</a></code> takes an expression and a
condition as arguments. This makes custom conditional formatting
possible. For example, imagine that we want to color every graph element
with the number “4” in the column <code>est</code> blue, you could
use:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Add color column to the graph elements</span></span>
<span>  <span class="fu"><a href="../reference/edit_graph.html">edit_graph</a></span><span class="op">(</span><span class="op">{</span> <span class="va">color</span> <span class="op">=</span> <span class="st">"black"</span> <span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># Conditionally change color to blue when the column 'est' contains the number 4</span></span>
<span>  <span class="fu"><a href="../reference/if_edit.html">if_edit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"4"</span>, <span class="va">est</span><span class="op">)</span>, <span class="op">{</span><span class="va">color</span> <span class="op">=</span> <span class="st">"blue"</span><span class="op">}</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig10.png" width="300px"></p>
</div>
</div>
<div class="section level2">
<h2 id="math-notation-in-graphs">Math Notation in Graphs<a class="anchor" aria-label="anchor" href="#math-notation-in-graphs"></a>
</h2>
<p>Since the objects created by <code><a href="../reference/prepare_graph.html">prepare_graph()</a></code> and
<code><a href="../reference/graph_sem.html">graph_sem()</a></code> are <code>ggplot</code> objects, we can use the
full functionality of <code>ggplot</code> to customize them. The
following example, based on code provided by GitHub user
<code>dumaskvn</code>, showcases how <code>plotmath</code> labels can be
displayed (see <code><a href="https://rdrr.io/r/grDevices/plotmath.html" class="external-link">?plotmath</a></code>). There are several ways to do
this; this is just one example.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">  Sepal.Length ~ Sepal.Width + Petal.Length</span></span>
<span><span class="st">  Sepal.Width ~ Petal.Length</span></span>
<span><span class="st">"</span></span>
<span><span class="co"># fit model</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">model</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="co"># specify layout for consistency</span></span>
<span><span class="va">layout</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layout.html">get_layout</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"Sepal.Width"</span>, <span class="st">""</span>,</span>
<span>                     <span class="st">"Petal.Length"</span>, <span class="st">""</span>, <span class="st">"Sepal.Length"</span>, rows <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co"># get data from prepare_graph</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_graph.html">prepare_graph</a></span><span class="op">(</span><span class="va">fit</span>, layout <span class="op">=</span> <span class="va">layout</span>, angle <span class="op">=</span> <span class="fl">180</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># standard graph</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Duplicate node data.frame</span></span>
<span><span class="va">df_nodes</span> <span class="op">&lt;-</span> <span class="va">p</span><span class="op">$</span><span class="va">nodes</span></span>
<span><span class="co"># Add mathematical notation to node label</span></span>
<span><span class="va">df_nodes</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"atop("</span>, <span class="va">p</span><span class="op">$</span><span class="va">nodes</span><span class="op">$</span><span class="va">label</span>, <span class="st">", "</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"alpha-div"</span>, <span class="co"># Add a Greek letter</span></span>
<span>                                                 <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"R^2 =="</span>, <span class="fu"><a href="https://rdrr.io/r/base/formatc.html" class="external-link">formatC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/lavInspect.html" class="external-link">inspect</a></span><span class="op">(</span><span class="va">fit</span>, <span class="st">"r2"</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span>, format <span class="op">=</span> <span class="st">"f"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, <span class="st">")"</span><span class="op">)</span>  <span class="co"># Add R2 to node labels</span></span>
<span><span class="co"># Set original labels to blank</span></span>
<span><span class="va">p</span><span class="op">$</span><span class="va">nodes</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">""</span> </span>
<span></span>
<span><span class="co"># Plot, treat as ggplot object and add parsed node labels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df_nodes</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">x</span>, y<span class="op">=</span><span class="va">y</span>, label<span class="op">=</span><span class="va">label</span><span class="op">)</span>, parse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="pgfig11.png" width="300px"></p>
<!--As explained before, the functions `get_edges()` and `get_nodes()`,
which are used in the default arguments of `prepare_graph()` and `graph_sem()`,
have an argument `columns` which adds auxiliary columns to the resulting data.frames.
This can be used to customize visual aspects of the edges and nodes based on, for example, the value of the estimates:

```r, eval = TRUE, echo = FALSE, warning = FALSE, message = FALSE, out.width='30%'}
fit <- sem("mpg ~ cyl
           mpg ~ am", data = mtcars)

p <- prepare_graph(fit,
                   edges = get_edges(fit, columns = "est"),
                   fix_coord = TRUE)
edges(p) %>%
  mutate(color = "black",
         color = replace(color, arrow == "last" & as.numeric(est) < 0, "red"),
         color = replace(color, arrow == "last" & as.numeric(est) > 0, "green")) -> edges(p)

plot(p)
```
```r, eval = FALSE, echo = FALSE, warning = FALSE, message = FALSE, out.width='30%'}
fit <- sem("mpg ~ cyl
           mpg ~ am", data = mtcars)
set.seed(15)
p <- prepare_graph(fit,
                   edges = get_edges(fit, columns = "est"),
                   fix_coord = TRUE)
edges(p) %>%
  mutate(color = "black",
         color = replace(color, arrow == "last" & as.numeric(est) < 0, "red"),
         color = replace(color, arrow == "last" & as.numeric(est) > 0, "green")) -> edges(p)

p <- plot(p)

ggsave("pgfig8.png", p, device = "png", width= 4, height = 4)
knitr::include_graphics("pgfig8.png")
```
-->
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Caspar J. van Lissa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
